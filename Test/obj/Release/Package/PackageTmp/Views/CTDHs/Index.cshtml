@using Test.Models;
@model IEnumerable<Test.Models.CTDH>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/_GioHang.cshtml";
    double TongTien = 0;
}


@*<p>
        @Html.ActionLink("Create New", "Create")
    </p>*@

<div id="header">
    <div class="rectangle"></div>
    <div class="circle"></div>

    <a href="~/SanPhams/Index">
        <p id="Tittle">LaptopNganNgo</p>
        <img id="LetterL" width="70"
             src="~/Images/royal-alphabet-crown-letter-english-l-512.png" />
    </a>

    <img id="User_icon" width="40"
         src="~/Images/User.png" />
    @if (Session["HoTen"] != null)
    {
        <p id="Hello_Text">@Session["HoTen"].ToString()</p>
        <a href="@Url.Action("LogOut", "DangNhap")" id="Button_LogOut">Đăng xuất</a>
    }
    else if (Session["Email"] != null && Session["HoTen"] == null)
    {
        <p id="Hello_Text">Chào bạn,</p>
        <a href="@Url.Action("LogOut", "DangNhap")" id="Button_LogOut">Đăng xuất</a>
    }
    else
    {
        <a href="~/DangNhap/Index">

            <p id="Log_in">Đăng nhập</p>
        </a>
        <p id="text_1">hoặc Đăng ký</p>
    }

    <form action="@Url.Action("Search","SanPhams")" method="get">
        <input id="Search_textbox" type="text"
               placeholder="Tìm kiếm ở đây" name="keyword" />
        <img src="~/Images/search.png"
             width="19"
             style="
                 position: absolute;
                 left: 445.37px;
                 top: 139px;" />
        <button id="Search_button" type="submit" onclick="@Url.Action("Search", "SanPhams")">Tìm</button>
    </form>


    <div>
        <a href="@Url.Action("Index", "CTDHs")">
            <img id="Cart_image" src="~/Images/shopping-cart.png" width="39" />
            <p id="Cart_text">Giỏ hàng<p>
        </a>
        @if ((Session["ShoppingCart"] as List<CTDH>)?.Count == null)
        {
            <p id="Cart_number">0</p>
        }
        else
        {
            <p id="Cart_number">@((Session["ShoppingCart"] as List<CTDH>)?.Count)</p>
        }
    </div>

    <div class="dropdown">
        <button class="dropbtn">Danh mục sản phẩm</button>
        <div class="dropdown-content">
            <a href="#">Laptop Gaming  &emsp;&emsp;></a>
            <div id="Laptop_Gaming_Content">
                <p>
                    <a href="#">Acer</a>
                    <a href="#">Asus</a>
                    <a href="#">MSI</a>
                    <a href="#">Dell</a>
                    <a href="#">HP</a>
                    <a href="#">Lenovo</a>
                </p>
            </div>
            <a href="#">Laptop văn phòng  &emsp;></a>
            <div id="Laptop_VP_Content">
                <p>
                    <a href="#">Acer</a>
                    <a href="#">Asus</a>
                    <a href="#">MSI</a>
                    <a href="#">Dell</a>
                    <a href="#">HP</a>
                    <a href="#">Lenovo</a>
                </p>
            </div>
            <a href="#">Laptop sinh viên&emsp;&emsp;></a>
            <div id="Laptop_SV_Content">
                <p>
                    <a href="#">Acer</a>
                    <a href="#">Asus</a>
                    <a href="#">MSI</a>
                    <a href="#">Dell</a>
                    <a href="#">HP</a>
                    <a href="#">Lenovo</a>
                </p>
            </div>
        </div>
    </div>

    <div class="Menu_Bar">
        <a id="Ban_Hang" href="#">&emsp;Chính sách bán hàng</a>
        <a id="Bao_Hanh" href="#">&emsp;Chính sách bảo hành</a>
        <a id="Van_Chuyen" href="#">&emsp;Chính sách vận chuyển</a>
        <a id="Khuyen_Mai" href="#">&emsp;Khuyến mãi</a>
        <a id="Cham_Soc" href="~/CSKH/Index">&emsp;C.S Khách hàng</a>

        <img src="~/Images/policy.png"
             width="30"
             style="
            position:absolute;
            left:323px;
            top:215px;" />

        <img src="~/Images/wrench.png"
             width="30"
             style="
            position:absolute;
            left:560px;
            top:215px;" />

        <img src="~/Images/truck.png"
             width="30"
             style="
            position:absolute;
            left:800px;
            top:215px;" />

        <img src="~/Images/promotion.png"
             width="30"
             style="
            position:absolute;
            left:1095px;
            top:215px;" />

        <img src="~/Images/support.png"
             width="30"
             style="
            position:absolute;
            left:1320px;
            top:215px;" />
    </div>

</div>

<div class="Footer">

    <div id="logo_footer">
        <img src="~/Images/royal-alphabet-crown-letter-english-l-512.png "
             width="70" />
    </div>
    <p id="text1_ft">Sản Phẩm  </p>
    <p id="text2_ft">Tiếp Xúc </p>
    <p id="text3_ft">Theo Dõi  </p>
    <p id="text4_ft">Đăng Ký </p>

    <pre id="text5_ft">Đặc Trưng
Quảng cáo  
Tải Xuống</pre>

    <pre id="text6_ft">Liên hệ
FAQ  
Trợ Giúp</pre>

    <input id="Email_textbox" type="text"
           placeholder="Nhập Email của bạn" />
    <img id="FB_ft" src="~/Images/FB.png "
         width="30" />
    <img id="IG_ft" src="~/Images/IG.png "
         width="30" />

</div>


<p id="TenSP">Tên Sản Phẩm</p>
<p id="SL">Số lượng</p>
<p id="GiaTG">Đơn Giá</p>
<p id="GiaSG">Thành Tiền</p>
<p id="Xoa">Xóa</p>
<hr id="dk1" width="1450.97px" />



@using (Html.BeginForm("Edit", "CTDHs", FormMethod.Post))
{
    @*<form action="@Url.Action("Edit","CTDHs" )" method="post">*@

    <input type="submit" id="button_CapNhatGioHang" value="Cập nhật giỏ hàng" />
    @*</form>*@
    <div class="LoadSP_GH">

        @foreach (var item in Model)
        {
            TongTien += item.DonGia * item.SL;
            <div class="SanPham_GH">
                <img src="@Url.Content(item.SanPham.HinhAnhSP)" width="80" height="80" id="N1" />
                <div id="SanPham_ViTri">
                    @Html.Hidden("id", item.SanPham.MaSP)
                    @Html.Hidden("dongia", item.DonGia)

                    <input id="s1" max="@item.SanPham.SL" min="1" type="number" value="@item.SL" name="sl">
                    <input type="image" id="R1" src="~/Images/trash.png " formaction="@Url.Action("Delete")" method="post" />
                    <p id="pic1">
                        @Html.ActionLink(item.SanPham.TenSP, "Details", "SanPhams", new { id = item.SanPham.MaSP }, new { @class = "myActionlink" })
                    </p>
                    <p id="Gia1">@item.DonGia.ToString("N0") @("đ")</p>
                    <p id="Gia2">@((item.DonGia*item.SL).ToString("N0")) @("đ")</p>


                </div>
                <hr id="dk2" />
            </div>

        }
    </div>

}
<div class="TongTien">
    <p id="Sum">Tổng Tiền: </p>
    <p id="Tien">@TongTien.ToString("N0") @("đ")</p>
</div>




<a href="~/TT_DangNhap/Index"><div id="button_ThanhToan">Thanh toán</div></a>


@if (User.Identity.IsAuthenticated)
{
    <a href="@Url.Action("Create", "DonHangs")/@Session["MaKH"].ToString()"><div id="button_ThanhToan">Thanh toán</div></a>
}
else
{
    <a href="@Url.Action("Index", "TT_DangNhap")"><div id="button_ThanhToan">Thanh toán</div></a>
}